# DelTran - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ü–æ—Ç–æ–∫ —Å –û–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏ –∏ –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–µ–π

**–î–∞—Ç–∞**: 2025-01-20
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P0 (–ö–†–ò–¢–ò–ß–ù–û –¥–ª—è Compliance)

---

## üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ò–ù–¶–ò–ü–´

### 1. –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ FIAT
```
‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
   Obligation —Å–æ–∑–¥–∞–Ω–æ ‚Üí Token —Å—Ä–∞–∑—É –º–∏–Ω—Ç–∏—Ç—Å—è

‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
   Obligation —Å–æ–∑–¥–∞–Ω–æ ‚Üí Settlement ‚Üí Bank payout ‚Üí camt.054 BOOKED ‚Üí Token –º–∏–Ω—Ç–∏—Ç—Å—è
```

### 2. Obligation - —ç—Ç–æ "–æ–±–µ—â–∞–Ω–∏–µ", –ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—è
```
Obligation = "–ú—ã –û–ë–Ø–ó–ê–ù–´ –≤—ã–ø–ª–∞—Ç–∏—Ç—å, –Ω–æ –µ—â–µ –ù–ï –ø–æ–ª—É—á–∏–ª–∏ FIAT"
           ‚Üì
         –°—Ç–∞—Ç—É—Å: PENDING (–∂–¥–µ–º funding)
```

### 3. Settlement - —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∞–∫–∫–æ—Ä–¥
```
Settlement = "–ó–∞–∫—Ä—ã–≤–∞–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –ü–û–°–õ–ï –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"
           ‚Üì
         Obligation: PENDING ‚Üí SETTLED
         Token: MINT (1:1 backing)
```

---

## üìä –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –ü–æ—Ç–æ–∫ (Cross-Border):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 1: –ò–ù–ò–¶–ò–ê–¶–ò–Ø (–±–µ–∑ —Ç–æ–∫–µ–Ω–æ–≤, –±–µ–∑ –≥–∞—Ä–∞–Ω—Ç–∏–π)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. Gateway (pain.001)
   ‚îî‚îÄ> Compliance Engine (AML/KYC)
       ‚îî‚îÄ> Obligation Engine

           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ Obligation = "–û–±–µ—â–∞–Ω–∏–µ –≤—ã–ø–ª–∞—Ç–∏—Ç—å"               ‚îÇ
           ‚îÇ –°—Ç–∞—Ç—É—Å: PENDING                                  ‚îÇ
           ‚îÇ ‚ùå –ù–ï–¢ —Ç–æ–∫–µ–Ω–æ–≤ (FIAT –µ—â–µ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª)            ‚îÇ
           ‚îÇ ‚ùå –ù–ï–¢ –≥–∞—Ä–∞–Ω—Ç–∏–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–º–µ–Ω–µ–Ω–æ)            ‚îÇ
           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

           ‚îî‚îÄ> Clearing Engine (multilateral netting)
               ‚îî‚îÄ> Liquidity Router (–≤—ã–±–æ—Ä –±–∞–Ω–∫–∞)
                   ‚îî‚îÄ> Settlement Engine

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 2: –ò–°–ü–û–õ–ù–ï–ù–ò–ï (Settlement –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç payout)                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

2. Settlement Engine
   ‚îú‚îÄ> –§–æ—Ä–º–∏—Ä—É–µ—Ç pacs.008 (ISO 20022)
   ‚îú‚îÄ> –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –±–∞–Ω–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
   ‚îî‚îÄ> –ñ–¥–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è...

       Obligation –°—Ç–∞—Ç—É—Å: PENDING ‚Üí EXECUTING

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 3: –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –ë–ê–ù–ö–û–ú (–†–µ–∞–ª—å–Ω—ã–π FIAT –∑–∞—á–∏—Å–ª–µ–Ω!)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

3. Bank ‚Üí camt.054 BOOKED
   ‚îî‚îÄ> Gateway –ø–æ–ª—É—á–∞–µ—Ç
       ‚îî‚îÄ> –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: CREDIT + BOOKED

           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ ‚úÖ –†–ï–ê–õ–¨–ù–´–ô FIAT –ó–ê–ß–ò–°–õ–ï–ù –ù–ê –°–ß–ï–¢                ‚îÇ
           ‚îÇ ‚úÖ Bank confirmed (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–º–µ–Ω–µ–Ω–æ)       ‚îÇ
           ‚îÇ ‚úÖ –ì–û–¢–û–í–û –¥–ª—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏                        ‚îÇ
           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

           ‚îú‚îÄ> Settlement Engine ‚Üí Close Obligation
           ‚îÇ
           ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ   ‚îÇ Obligation: EXECUTING ‚Üí SETTLED              ‚îÇ
           ‚îÇ   ‚îÇ ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –í–´–ü–û–õ–ù–ï–ù–û                   ‚îÇ
           ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚îî‚îÄ> Token Engine ‚Üí Mint Token

               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               ‚îÇ Token —Å–æ–∑–¥–∞–Ω                                 ‚îÇ
               ‚îÇ Backing: 1:1 (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ camt.054 BOOKED)   ‚îÇ
               ‚îÇ ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–µ—Å–ø–µ—á–µ–Ω FIAT                  ‚îÇ
               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –õ–æ–∫–∞–ª—å–Ω—ã–π –ü–æ—Ç–æ–∫ (Same Country):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 1: –ò–ù–ò–¶–ò–ê–¶–ò–Ø                                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. Gateway ‚Üí Compliance ‚Üí Obligation Engine

   Obligation: PENDING
   ‚îú‚îÄ> ‚ùå –ú–∏–Ω—É–µ—Ç Clearing Engine (–ª–æ–∫–∞–ª—å–Ω—ã–π –ø–ª–∞—Ç–µ–∂)
   ‚îî‚îÄ> Liquidity Router (–≤—ã–±–æ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –±–∞–Ω–∫–∞)
       ‚îî‚îÄ> Settlement Engine

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 2: –ò–°–ü–û–õ–ù–ï–ù–ò–ï                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

2. Settlement Engine ‚Üí Local payout
   Obligation: PENDING ‚Üí EXECUTING

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 3: –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï                                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

3. Bank ‚Üí camt.054 BOOKED
   ‚îú‚îÄ> Settlement Engine ‚Üí Close Obligation (SETTLED)
   ‚îî‚îÄ> Token Engine ‚Üí Mint Token (1:1 backing)
```

---

## üîí –°–¢–ê–¢–£–°–´ OBLIGATION

### ObligationStatus Enum:

```rust
pub enum ObligationStatus {
    // –ù–∞—á–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    Pending,        // –°–æ–∑–¥–∞–Ω–æ, –∂–¥–µ–º funding –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
    Validated,      // –ü—Ä–æ—à–ª–æ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

    // –í –ø—Ä–æ—Ü–µ—Å—Å–µ
    Clearing,       // –í –∫–ª–∏—Ä–∏–Ω–≥–æ–≤–æ–º –æ–∫–Ω–µ (—Ç–æ–ª—å–∫–æ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ)
    ReadyForSettle, // –ì–æ—Ç–æ–≤–æ –∫ settlement
    Executing,      // Settlement –æ—Ç–ø—Ä–∞–≤–∏–ª payout –≤ –±–∞–Ω–∫

    // –§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    Settled,        // ‚úÖ –ë–∞–Ω–∫ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª (camt.054 BOOKED), obligation –∑–∞–∫—Ä—ã—Ç–æ
    Failed,         // ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å
    Cancelled,      // –û—Ç–º–µ–Ω–µ–Ω–æ
    Expired,        // –ò—Å—Ç–µ–∫–ª–æ –≤—Ä–µ–º—è
}
```

### –ü–µ—Ä–µ—Ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤:

```
Pending ‚Üí Validated ‚Üí Clearing ‚Üí ReadyForSettle ‚Üí Executing ‚Üí Settled ‚úÖ
                                                             ‚Üì
                                                          Failed ‚ùå
```

---

## üí∞ –¢–û–ö–ï–ù–ò–ó–ê–¶–ò–Ø - –¢–û–õ–¨–ö–û –ü–û–°–õ–ï SETTLED

### –ü—Ä–∞–≤–∏–ª–æ:

```rust
// Token Engine —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –¢–û–õ–¨–ö–û –æ—Ç Settlement Engine
// –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è obligation

if obligation_status == ObligationStatus::Settled {
    // ‚úÖ Obligation –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
    // ‚úÖ camt.054 BOOKED –ø–æ–ª—É—á–µ–Ω
    // ‚úÖ –†–µ–∞–ª—å–Ω—ã–π FIAT –Ω–∞ —Å—á–µ—Ç—É

    mint_token(payment, camt054_reference);
}
```

### –ì–∞—Ä–∞–Ω—Ç–∏–∏:

| –ü—Ä–æ–≤–µ—Ä–∫–∞ | –°—Ç–∞—Ç—É—Å |
|----------|--------|
| Obligation.status = SETTLED | ‚úÖ |
| camt.054 BOOKED received | ‚úÖ |
| Real FIAT on EMI account | ‚úÖ |
| Bank confirmation reference | ‚úÖ |
| Cannot be reversed | ‚úÖ |

---

## üéØ SETTLEMENT ENGINE - –§–∏–Ω–∞–ª—å–Ω—ã–π –ê–∫–∫–æ—Ä–¥

### –§—É–Ω–∫—Ü–∏–∏ Settlement Engine:

#### 1. –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ Payout

```rust
async fn execute_settlement(instruction: SettlementInstruction) -> Result<()> {
    // 1. –§–æ—Ä–º–∏—Ä—É–µ–º pacs.008 (ISO 20022)
    let pacs008 = build_pacs008_message(&instruction)?;

    // 2. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ –±–∞–Ω–∫
    send_to_bank(&pacs008).await?;

    // 3. –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å obligation
    update_obligation_status(
        instruction.obligation_id,
        ObligationStatus::Executing
    ).await?;

    Ok(())
}
```

#### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –ë–∞–Ω–∫–∞

```rust
async fn handle_bank_confirmation(camt054: Camt054Notification) -> Result<()> {
    // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º: CREDIT + BOOKED
    if !is_credit_event(&camt054) || !is_booked(&camt054) {
        return Ok(()); // Skip DEBIT or PENDING
    }

    // 2. –ù–∞—Ö–æ–¥–∏–º obligation –ø–æ end_to_end_id
    let obligation = find_obligation_by_e2e(&camt054.end_to_end_id).await?;

    // 3. –ö–†–ò–¢–ò–ß–ù–û: –ó–∞–∫—Ä—ã–≤–∞–µ–º obligation
    close_obligation(
        obligation.id,
        ObligationStatus::Settled,
        camt054.bank_reference
    ).await?;

    info!("‚úÖ Obligation {} SETTLED - –±–∞–Ω–∫ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ", obligation.id);

    // 4. –¢–û–õ–¨–ö–û –¢–ï–ü–ï–†–¨ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Token Engine
    publish_to_token_engine(TokenMintRequest {
        payment_id: obligation.payment_id,
        amount: camt054.amount,
        currency: camt054.currency,
        obligation_id: obligation.id,
        bank_reference: camt054.bank_reference,
        booked_at: camt054.booking_date,
    }).await?;

    Ok(())
}
```

#### 3. –ó–∞–∫—Ä—ã—Ç–∏–µ Obligation

```rust
async fn close_obligation(
    obligation_id: Uuid,
    final_status: ObligationStatus,
    bank_reference: String,
) -> Result<()> {
    sqlx::query!(
        r#"
        UPDATE obligations
        SET
            status = $1,
            settled_at = NOW(),
            bank_confirmation_reference = $2,
            updated_at = NOW()
        WHERE obligation_id = $3
        "#,
        final_status.to_string(),
        bank_reference,
        obligation_id
    )
    .execute(&db)
    .await?;

    info!("üîí Obligation {} –∑–∞–∫—Ä—ã—Ç–æ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º: {:?}", obligation_id, final_status);

    // Publish event –¥–ª—è analytics
    publish_obligation_closed_event(obligation_id, final_status).await?;

    Ok(())
}
```

---

## üìã NATS TOPICS - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Flow

### –°–æ–±—ã—Ç–∏—è:

| Topic | Publisher | Subscriber | Trigger | Payload |
|-------|-----------|------------|---------|---------|
| `deltran.obligation.create` | Gateway, Compliance | Obligation Engine | pain.001 received | CanonicalPayment |
| `deltran.obligation.validated` | Obligation Engine | Clearing/Liquidity | Obligation VALIDATED | Obligation |
| `deltran.clearing.submit` | Obligation Engine | Clearing Engine | International payment | Payment + Obligation |
| `deltran.liquidity.select` | Clearing Engine | Liquidity Router | After netting | Net Positions |
| `deltran.liquidity.select.local` | Obligation Engine | Liquidity Router | Local payment | Payment + Obligation |
| `deltran.settlement.execute` | Liquidity Router | Settlement Engine | Bank selected | Settlement Instruction |
| `deltran.settlement.executed` | Settlement Engine | Analytics | pacs.008 sent | Settlement ID |
| `deltran.bank.camt054` | Gateway | Settlement Engine | Bank confirmation | camt.054 BOOKED |
| **`deltran.obligation.settled`** | **Settlement Engine** | **Analytics, Reporting** | **Obligation closed** | **Obligation + camt.054 ref** |
| **`deltran.token.mint`** | **Settlement Engine** | **Token Engine** | **AFTER obligation settled** | **TokenMintRequest** |
| `deltran.token.minted` | Token Engine | Analytics | Token created | Token + Obligation ID |

---

## üîê DATABASE SCHEMA - Obligation Table

```sql
CREATE TABLE obligations (
    obligation_id UUID PRIMARY KEY,
    payment_id UUID NOT NULL,
    deltran_tx_id UUID NOT NULL,

    -- Amounts
    amount DECIMAL(20, 4) NOT NULL,
    currency VARCHAR(3) NOT NULL,

    -- Parties
    debtor_country VARCHAR(2) NOT NULL,
    creditor_country VARCHAR(2) NOT NULL,

    -- Status Tracking
    status VARCHAR(50) NOT NULL DEFAULT 'PENDING',
    -- PENDING, VALIDATED, CLEARING, READY_FOR_SETTLE, EXECUTING, SETTLED, FAILED

    -- Settlement Info
    settlement_id UUID,
    settlement_instruction_id UUID,

    -- Bank Confirmation
    bank_confirmation_reference VARCHAR(255),
    camt054_entry_reference VARCHAR(255),

    -- Timestamps
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    validated_at TIMESTAMP,
    clearing_started_at TIMESTAMP,
    settlement_started_at TIMESTAMP,
    settled_at TIMESTAMP,  -- ‚úÖ –ö–†–ò–¢–ò–ß–ù–û: –∫–æ–≥–¥–∞ obligation –∑–∞–∫—Ä—ã—Ç–æ
    updated_at TIMESTAMP NOT NULL DEFAULT NOW(),

    -- Indexes
    INDEX idx_obligation_payment (payment_id),
    INDEX idx_obligation_status (status),
    INDEX idx_obligation_settled (settled_at)
);

-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
COMMENT ON COLUMN obligations.status IS '–°—Ç–∞—Ç—É—Å –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞: PENDING ‚Üí SETTLED';
COMMENT ON COLUMN obligations.settled_at IS '–ö–†–ò–¢–ò–ß–ù–û: –í—Ä–µ–º—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±–∞–Ω–∫–æ–º (camt.054 BOOKED)';
COMMENT ON COLUMN obligations.bank_confirmation_reference IS '–°—Å—ã–ª–∫–∞ –Ω–∞ bank statement entry';
```

---

## üéØ TOKEN MINT REQUEST

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:

```rust
#[derive(Debug, Serialize, Deserialize)]
pub struct TokenMintRequest {
    // Payment Info
    pub payment_id: Uuid,
    pub deltran_tx_id: Uuid,
    pub end_to_end_id: String,

    // Obligation Info (–ö–†–ò–¢–ò–ß–ù–û!)
    pub obligation_id: Uuid,
    pub obligation_status: String,  // Must be "SETTLED"
    pub obligation_settled_at: DateTime<Utc>,

    // Amount
    pub amount: Decimal,
    pub currency: String,  // Will create xUSD, xAED, etc.

    // Bank Confirmation (1:1 Backing Proof!)
    pub bank_reference: String,          // camt.054 reference
    pub bank_statement_entry: String,    // Entry ID from bank
    pub booked_at: DateTime<Utc>,       // Bank booking timestamp

    // Audit Trail
    pub camt054_message_id: String,
    pub account_id: String,              // Which EMI account received FIAT
}
```

### Validation –≤ Token Engine:

```rust
async fn validate_mint_request(request: &TokenMintRequest) -> Result<()> {
    // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ obligation SETTLED
    if request.obligation_status != "SETTLED" {
        return Err(TokenError::ObligationNotSettled(
            format!("Cannot mint token - obligation {} status is {}, expected SETTLED",
                    request.obligation_id, request.obligation_status)
        ));
    }

    // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ bank reference
    if request.bank_reference.is_empty() {
        return Err(TokenError::MissingBankConfirmation);
    }

    // 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –Ω–µ –ø—ã—Ç–∞–µ–º—Å—è –¥–≤–∞–∂–¥—ã —Å–º–∏–Ω—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω
    if token_already_minted_for_obligation(request.obligation_id).await? {
        return Err(TokenError::DuplicateMint(request.obligation_id));
    }

    // 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ FIAT –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–∞ —Å—á–µ—Ç—É (reconciliation)
    verify_fiat_on_account(
        request.account_id,
        request.amount,
        request.currency,
        request.booked_at
    ).await?;

    Ok(())
}
```

---

## üöÄ IMPLEMENTATION PLAN

### –§–∞–π–ª—ã –¥–ª—è –ò–∑–º–µ–Ω–µ–Ω–∏—è:

#### 1. Settlement Engine (`services/settlement-engine/src/`)

**–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
- ‚úÖ `handle_bank_confirmation()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ camt.054
- ‚úÖ `close_obligation()` - –∑–∞–∫—Ä—ã—Ç–∏–µ obligation –≤ –ë–î
- ‚úÖ `publish_obligation_settled()` - —Å–æ–±—ã—Ç–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ `publish_token_mint_request()` - –∑–∞–ø—Ä–æ—Å –Ω–∞ –º–∏–Ω—Ç–∏–Ω–≥

**–§–∞–π–ª—ã**:
```
src/
‚îú‚îÄ nats_consumer.rs        (–ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ deltran.bank.camt054)
‚îú‚îÄ obligation_closer.rs    (NEW - –ª–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è obligations)
‚îú‚îÄ token_mint_publisher.rs (NEW - –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Token Engine)
‚îî‚îÄ database.rs             (queries –¥–ª—è update obligation)
```

#### 2. Obligation Engine (`services/obligation-engine/src/`)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `settled_at` –≤ ObligationCreatedEvent
- ‚úÖ –ù–ï –≤—ã–∑—ã–≤–∞—Ç—å Token Engine (—É–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥)
- ‚úÖ –ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å: PENDING, VALIDATED, EXECUTING

**–£–±—Ä–∞—Ç—å**:
```rust
// ‚ùå –£–î–ê–õ–ò–¢–¨ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
async fn publish_to_token_engine(nats_client: &Client, payment: &CanonicalPayment)
```

#### 3. Token Engine (`services/token-engine/src/`)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚úÖ –°–ª—É—à–∞—Ç—å `deltran.token.mint` (—É–∂–µ –¥–µ–ª–∞–µ—Ç)
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å validation: obligation_status == SETTLED
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å bank_reference
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å duplicate minting

#### 4. Gateway (`services/gateway-rust/src/`)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚úÖ camt.054 handler –¥–æ–ª–∂–µ–Ω –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ `deltran.bank.camt054`
- ‚úÖ Settlement Engine –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å –∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å obligation
- ‚úÖ Settlement Engine –ø–æ—Ç–æ–º –≤—ã–∑–æ–≤–µ—Ç Token Engine

---

## üìä SEQUENCE DIAGRAM

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Gateway ‚îÇ  ‚îÇ Compliance ‚îÇ  ‚îÇ Obligat. ‚îÇ  ‚îÇ Clearing‚îÇ  ‚îÇ Liquidity‚îÇ  ‚îÇSettle‚îÇ  ‚îÇ Token  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ pain.001    ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ AML/KYC      ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ Create       ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ Obligation   ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ Status:PENDING‚îÇ            ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ Netting     ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ Select    ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ Bank      ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ Execute  ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ pacs.008 ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ>BANK ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ Status: EXECUTING          ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ  camt.054   ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ  BOOKED     ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ deltran.bank.camt054       ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ   Close   ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ Obligation‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ Status: SETTLED            ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ          ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ    deltran.token.mint‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ   Mint   ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ   Token  ‚îÇ
     ‚îÇ             ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ           ‚îÇ   (1:1)  ‚îÇ
```

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ï –ì–ê–†–ê–ù–¢–ò–ò

### 1. –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ FIAT

```
Token —Å–æ–∑–¥–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –µ—Å–ª–∏:
‚îú‚îÄ ‚úÖ Obligation.status == SETTLED
‚îú‚îÄ ‚úÖ camt.054 BOOKED received
‚îú‚îÄ ‚úÖ Bank confirmation reference exists
‚îî‚îÄ ‚úÖ FIAT verified on EMI account
```

### 2. Obligation - –æ–±–µ—â–∞–Ω–∏–µ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º

```
Obligation lifecycle:
PENDING ‚Üí VALIDATED ‚Üí CLEARING ‚Üí EXECUTING ‚Üí SETTLED ‚úÖ
                                            ‚Üì
                                          Token Mint
```

### 3. Settlement - —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∞–∫–∫–æ—Ä–¥

```
Settlement Engine closes obligation ONLY after:
‚îú‚îÄ ‚úÖ pacs.008 sent to bank
‚îú‚îÄ ‚úÖ camt.054 BOOKED received
‚îú‚îÄ ‚úÖ Bank confirmed money transfer
‚îî‚îÄ ‚úÖ THEN: close obligation + trigger token mint
```

---

**–°—Ç–∞—Ç—É—Å**: üî¥ –¢–†–ï–ë–£–ï–¢–°–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P0 (CRITICAL –¥–ª—è compliance)
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å obligation closing –≤ Settlement Engine
